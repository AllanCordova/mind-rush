<section class="bg p-4 rounded-4 my-4 container">
  <div class="d-flex flex-wrap gap-4 justify-content-between">
    <!-- 📝 Formulário de criação de pergunta -->
    <div class="flex-fill" style="min-width: 300px; max-width: 48%">
      <h2 class="pixel-xl title text-center mb-4">Criar Questão</h2>

      @if (quiz) {
      <p class="text-center font-comin pixel-sm text-light">
        📘 Quiz: {{ quiz.title }}
      </p>

      <div class="mb-3">
        <label class="pixel-md mb-2">Pergunta</label>
        <input
          type="text"
          class="form-control font-comin form-control-lg border-secondary"
          [(ngModel)]="questionText"
          placeholder="Digite a pergunta"
        />
      </div>

      <div class="mb-3">
        <label class="pixel-md mb-2">Alternativa</label>
        <div class="d-flex gap-2">
          <input
            type="text"
            class="form-control font-comin border-secondary"
            [(ngModel)]="answerText"
            placeholder="Ex: Brasília"
          />
          <button
            class="btn btn-secondary btn-sm pixel-font"
            (click)="addAnswer()"
          >
            ➕
          </button>
        </div>
      </div>

      @if (tempAnswers.length > 0) {
      <div class="mb-4">
        <label class="pixel-sm mb-2 text-light">Alternativas</label>
        <ul class="list-group">
          @for (ans of tempAnswers; track $index) {
          <li
            class="list-group-item bg-transparent text-light d-flex justify-content-between align-items-center font-comin"
          >
            {{ ans }}
            <button
              class="btn btn-sm"
              [ngClass]="{
                'btn-success': correctAnswerIndex === $index,
                'btn-outline-secondary': correctAnswerIndex !== $index
              }"
              (click)="markCorrect($index)"
            >
              ✔
            </button>
          </li>
          }
        </ul>
      </div>
      }

      <div class="d-flex justify-content-center">
        <button
          class="btn btn-primary-pixel btn-pixel pixel-font"
          (click)="saveQuestion()"
        >
          ✅ Salvar Questão
        </button>
      </div>
      } @else {
      <p class="text-warning text-center">Quiz não encontrado. 😢</p>
      }
    </div>

    <!-- 📚 Lista de questões adicionadas -->
    <div class="flex-fill" style="min-width: 300px; max-width: 48%">
      <h3 class="pixel-xl title text-center mb-4">Questões Criadas</h3>

      @if (quiz.questions.length > 0) {
      <ul class="list-group list-group-flush">
        @for (q of quiz.questions; track q.id) {
        <li class="list-group-item bg-transparent text-light font-comin">
          <div class="d-flex justify-content-between align-items-center">
            {{ q.text }}
            <button class="btn btn-sm text-light" (click)="toggleAnswers(q.id)">
              <i
                [ngClass]="{
                  'bi bi-arrow-up-circle-fill': expandedQuestions.includes(
                    q.id
                  ),
                  'bi bi-arrow-down-circle-fill': !expandedQuestions.includes(
                    q.id
                  )
                }"
              ></i>
            </button>
          </div>

          @if (expandedQuestions.includes(q.id)) {
          <ul class="mt-2 ps-3">
            @for (ans of q.answers; track $index) {
            <li class="text-light small">- {{ ans }}</li>
            }
          </ul>
          }
        </li>

        }
      </ul>
      } @else {
      <p class="text-light text-center">Nenhuma questão ainda...</p>
      }
    </div>
  </div>
</section>
